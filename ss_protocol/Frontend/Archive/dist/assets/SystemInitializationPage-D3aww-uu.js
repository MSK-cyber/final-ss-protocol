import{u as S,r as n,g as z,a as D,j as e,Z as i,i as R,C as E}from"./index-Fje8cVxI.js";function H(){const{AuctionContract:l,provider:X,signer:v}=S(),[b,y]=n.useState(!1),[A,h]=n.useState(!0),[c,x]=n.useState(!1),[a,k]=n.useState({}),[p,T]=n.useState({stateToken:!1,davToken:!1,lpHelper:!1,airdropDistributor:!1,auctionAdmin:!1,buyBurnController:!1,pulseXRouter:!1,pulseXFactory:!1});n.useEffect(()=>{var d,o,m,u;const t=E.PULSECHAIN,s=D(t),r=z();k({stateToken:s.STATE_TOKEN,davToken:s.DAV_TOKEN,lpHelper:s.LP_HELPER,airdropDistributor:s.AIRDROP_DISTRIBUTOR,auctionAdmin:s.AUCTION_ADMIN,buyBurnController:s.BUY_BURN_CONTROLLER,pulseXRouter:((o=(d=r==null?void 0:r.dex)==null?void 0:d.router)==null?void 0:o.address)||"0x98bf93ebf5c380C0e6Ae8e192A7e2AE08edAcc02",pulseXFactory:((u=(m=r==null?void 0:r.dex)==null?void 0:m.factory)==null?void 0:u.address)||"0x1715a3E4A142d8b698131108995174F37aEBA10D"})},[]),n.useEffect(()=>{(async()=>{if(!l){h(!1);return}h(!0);try{const s=await l.stateToken().catch(()=>i),r=await l.davToken().catch(()=>i),d=await l.lpHelper().catch(()=>i),o=await l.airdropDistributor().catch(()=>i),m=await l.auctionAdmin().catch(()=>i),u=await l.buyBurnController().catch(()=>i),C=await l.pulseXRouter().catch(()=>i),w=await l.pulseXFactory().catch(()=>i);T({stateToken:s!==i,davToken:r!==i,lpHelper:d!==i,airdropDistributor:o!==i,auctionAdmin:m!==i,buyBurnController:u!==i,pulseXRouter:C!==i,pulseXFactory:w!==i}),x(s!==i)}catch(s){console.log("System not initialized yet:",s),x(!1)}finally{h(!1)}})()},[l]);const I=async()=>{if(!l){alert("Contract not available");return}if(!v){alert("Please connect your wallet");return}const t=Object.entries(a);for(const[s,r]of t)if(!r||!R(r)){alert(`Invalid ${s} address: ${r}`);return}y(!0);try{console.log("Initializing system with addresses:",a);const s=await l.initializeCompleteSystem(a.stateToken,a.davToken,a.lpHelper,a.airdropDistributor,a.auctionAdmin,a.buyBurnController,a.pulseXRouter,a.pulseXFactory);console.log("Transaction sent:",s.hash),alert(`System initialization transaction sent: ${s.hash}`);const r=await s.wait();console.log("Transaction confirmed:",r),alert("System initialized successfully!"),x(!0)}catch(s){console.error("Initialization failed:",s),alert(`Initialization failed: ${s.message}`)}finally{y(!1)}},j=[{key:"stateToken",label:"STATE Token",icon:"ü™ô",description:"Protocol governance and utility token",address:a.stateToken},{key:"davToken",label:"DAV Token",icon:"üíé",description:"Dividend-adjusted value token",address:a.davToken},{key:"lpHelper",label:"LP Helper",icon:"üîó",description:"Liquidity pool creation assistant",address:a.lpHelper},{key:"airdropDistributor",label:"Airdrop Distributor",icon:"üéÅ",description:"Token distribution manager",address:a.airdropDistributor},{key:"auctionAdmin",label:"Auction Admin",icon:"‚öôÔ∏è",description:"System administration interface",address:a.auctionAdmin},{key:"buyBurnController",label:"Buy & Burn Controller",icon:"üî•",description:"Token buyback and burn mechanism",address:a.buyBurnController},{key:"pulseXRouter",label:"PulseX Router",icon:"üîÑ",description:"DEX swap routing contract",address:a.pulseXRouter},{key:"pulseXFactory",label:"PulseX Factory",icon:"üè≠",description:"DEX pair creation factory",address:a.pulseXFactory}],N=j.length,f=Object.values(p).filter(Boolean).length,g=f/N*100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:"üöÄ SYSTEM INITIALIZATION"}),e.jsx("small",{className:"text-muted",children:"Step 1: Configure the complete auction protocol"})]}),A&&e.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Checking..."})})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:`alert ${c?"alert-success":"alert-warning"} d-flex align-items-center mb-4`,children:[e.jsx("div",{className:"me-3",style:{fontSize:"2rem"},children:c?"‚úÖ":"‚ö†Ô∏è"}),e.jsx("div",{className:"flex-grow-1",children:c?e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"alert-heading mb-1",children:"System Fully Initialized"}),e.jsx("p",{className:"mb-0 small",children:"All protocol contracts are connected and the system is ready for operation."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"alert-heading mb-1",children:"Initialization Required"}),e.jsx("p",{className:"mb-0 small",children:"Connect all protocol contracts to enable the auction system."})]})}),!c&&l&&e.jsx("button",{className:"btn btn-primary btn-lg ms-3",onClick:I,disabled:b,style:{minWidth:"200px"},children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Initializing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-gear-fill me-2"}),"Initialize System"]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("span",{className:"small fw-bold text-uppercase",children:"Initialization Progress"}),e.jsxs("span",{className:"badge bg-primary",children:[f,"/",N," Connected"]})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-gradient",role:"progressbar",style:{width:`${g}%`},"aria-valuenow":g,"aria-valuemin":"0","aria-valuemax":"100"})})]}),!l&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),e.jsx("strong",{children:"Auction Contract Not Connected"}),e.jsx("p",{className:"mb-0 small mt-1",children:"Please ensure your wallet is connected and the contract is properly deployed."})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"bi bi-diagram-3-fill me-2"}),"CONTRACT CONFIGURATION"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row g-3",children:j.map(t=>e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsx("div",{className:`card h-100 ${p[t.key]?"border-success":"border-secondary"}`,style:{borderWidth:"2px"},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-2",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:t.icon}),e.jsx("div",{children:e.jsx("h6",{className:"mb-0 small",children:t.label})})]}),e.jsx("div",{children:p[t.key]?e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"bi bi-check-circle-fill me-1"}),"Connected"]}):e.jsxs("span",{className:"badge bg-secondary",children:[e.jsx("i",{className:"bi bi-circle me-1"}),"Pending"]})})]}),e.jsx("p",{className:"small text-muted mb-2",children:t.description}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("code",{className:"small text-truncate flex-grow-1",style:{fontSize:"0.7rem"},children:t.address?`${t.address.slice(0,6)}...${t.address.slice(-4)}`:"Not set"}),t.address&&e.jsx("button",{className:"btn btn-sm btn-outline-secondary py-0 px-2",onClick:()=>{navigator.clipboard.writeText(t.address),alert("Address copied to clipboard!")},title:"Copy address",children:e.jsx("i",{className:"bi bi-clipboard"})})]})]})})},t.key))})})]}),!c&&e.jsxs("div",{className:"card mt-4",children:[e.jsx("div",{className:"card-header bg-primary bg-opacity-10",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"bi bi-info-circle-fill me-2"}),"WHAT HAPPENS DURING INITIALIZATION?"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("div",{className:"text-primary",style:{fontSize:"1.5rem"},children:"1Ô∏è‚É£"}),e.jsxs("div",{children:[e.jsx("h6",{className:"small fw-bold mb-1",children:"Contract Connections"}),e.jsx("p",{className:"small text-muted mb-0",children:"All protocol contracts are linked to the main auction contract, establishing the system architecture."})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("div",{className:"text-primary",style:{fontSize:"1.5rem"},children:"2Ô∏è‚É£"}),e.jsxs("div",{children:[e.jsx("h6",{className:"small fw-bold mb-1",children:"Token Allowances"}),e.jsx("p",{className:"small text-muted mb-0",children:"STATE and DAV token allowances are configured for airdrop distribution and buy & burn operations."})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("div",{className:"text-primary",style:{fontSize:"1.5rem"},children:"3Ô∏è‚É£"}),e.jsxs("div",{children:[e.jsx("h6",{className:"small fw-bold mb-1",children:"DEX Integration"}),e.jsx("p",{className:"small text-muted mb-0",children:"PulseX router and factory are configured for liquidity pool creation and token swapping."})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("div",{className:"text-primary",style:{fontSize:"1.5rem"},children:"4Ô∏è‚É£"}),e.jsxs("div",{children:[e.jsx("h6",{className:"small fw-bold mb-1",children:"System Activation"}),e.jsx("p",{className:"small text-muted mb-0",children:"The auction system becomes fully operational and ready to process token auctions."})]})]})})]})})]})]})}export{H as default};
